<ng-template #createIdeaModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Create idea</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="createIdeaForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" formControlName="title" class="form-control"
                    [ngClass]="{ 'is-invalid': createIdeaSubmitted && createIdeaForm.controls.title.errors }" />
                
                <label for="content">Content</label>
                <textarea type="text" formControlName="content" class="form-control" rows="10"
                    [ngClass]="{ 'is-invalid': createIdeaSubmitted && createIdeaForm.controls.content.errors }" ></textarea>
                <div *ngIf="createIdeaSubmitted && createIdeaForm.controls.content.errors" class="invalid-feedback">
                    <div *ngIf="createIdeaForm.controls.content.errors.required">Content is required</div>
                </div>

                <label for="life">Initial life</label><br>
                <div class="btn-group btn-group-toggle">
                    <label class="btn btn-secondary" [ngClass]="{'btn-success': createIdeaForm.value.life == 6, 'btn-secondary': createIdeaForm.value.life != 6}">
                      <input formControlName="life" type="radio" value="6" name="life" checked="checked">6 h
                    </label>
                    <label class="btn btn-secondary" [ngClass]="{'btn-success': createIdeaForm.value.life == 24, 'btn-secondary': createIdeaForm.value.life != 24}">
                      <input formControlName="life" type="radio" value="24" name="life">1 d
                    </label>
                    <label class="btn btn-secondary" [ngClass]="{'btn-success': createIdeaForm.value.life == 72, 'btn-secondary': createIdeaForm.value.life != 72}">
                      <input formControlName="life" type="radio" value="72" name="life">3 d
                    </label>
                    <label class="btn btn-secondary">
                        <input type="number" formControlName="customLife" class="form-control">
                    </label>
                  </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Submit</button>
        <button type="button" class="btn btn-outline-secondary" (click)="modal.close('Save click')">Cancel</button>
    </div>
</ng-template>


<div class="p-4">
    <div class="container">
        <h2 >Root Posts</h2>
        <div *ngFor="let idea of ideas">
            <app-idea [idea]="idea" (create-idea)="createIdea($event, createIdeaModal)"></app-idea>
        </div>
    </div>
</div>